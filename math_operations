#!/usr/bin/python3
# SPDX-FileCopyrightText: 2024 Soichiro Suzuki
# SPDX-License-Identifier: BSD-3-Clause

#!/usr/bin/python3
# SPDX-FileCopyrightText: 2024 Soichiro Suzuki
# SPDX-License-Identifier: BSD-3-Clause

import sys

def calculate(numbers, operation):
    if operation == "+":
        return sum(numbers)
    elif operation == "-":
        result = numbers[0]
        for num in numbers[1:]:
            result -= num
        return result
    elif operation == "*":
        result = 1
        for num in numbers:
            result *= num
        return result
    elif operation == "/":
        result = numbers[0]
        for num in numbers[1:]:
            if num == 0:
                return "エラー: ゼロでの割り算はできません"
            result /= num
        return result
    else:
        return "エラー: 不正な演算です"

if __name__ == "__main__":
    numbers = []
    print("1行ごとに数字を入力してください (終了するには「＝」を入力してください):")
    for line in sys.stdin:
        line = line.strip()
        if line == "=":
            break  # 「＝」で入力終了
        try:
            numbers.append(float(line))  # 数字をリストに追加
        except ValueError:
            print(f"エラー: 数字以外の入力がありました: {line}")
            sys.exit(1)

    if len(numbers) < 2:
        print("エラー: 計算には少なくとも2つの数字が必要です。")
        sys.exit(1)

    print("加算、減算、掛け算、割り算を選択してください: +, -, *, /")
    operation = input().strip()

    result = calculate(numbers, operation)
    print(f"結果: {result}")


